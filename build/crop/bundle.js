!function t(e,i,n){function o(s,a){if(!i[s]){if(!e[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=i[s]={exports:{}};e[s][0].call(c.exports,function(t){var i=e[s][1][t];return o(i||t)},c,c.exports,t,e,i,n)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,e,i){"use strict";function n(){if(h&&u){var t=u.getContext("2d");u.width=h.width,u.height=h.height,t.drawImage(h,0,0,h.width,h.height),document.body.removeChild(h),document.body.removeChild(u),o(u,h)}}function o(t,e){s=new a.ImageEditor(t,e),r()}function r(){s&&s.resize()}var s,a=t("./nts/editor/ImageEditor"),h=document.getElementById("image"),u=document.getElementById("texture");window.onload=n.bind(void 0),window.onresize=r.bind(void 0)},{"./nts/editor/ImageEditor":2}],2:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0,i.ImageEditor=void 0;var o=t("./crop/Cropper"),r=t("../../../lib/animation");i.ImageEditor=function(){function t(e,i){n(this,t),this.initialize(e,i),this.resize(),this.updateLoop()}return t.prototype.initialize=function(t,e){this.imageElement=t,this.textureCanvas=e,this.canvas=document.getElementById("canvas"),this.context=this.canvas.getContext("2d"),this.renderer=new PIXI.CanvasRenderer(this.canvas.width,this.canvas.height,{view:this.canvas,autoResize:!0,backgroundColor:0}),this.stage=new PIXI.Container,this.cropper=new o.Cropper(this.canvas,this.imageElement,this.textureCanvas),this.stage.addChild(this.cropper)},t.prototype.updateLoop=function(t){this.update(t),(0,r.requestAnimFrame)(this.updateLoop.bind(this))},t.prototype.update=function(t){this.cropper&&this.cropper.update(),this.renderer.render(this.stage)},t.prototype.resize=function(){var t=window.innerWidth,e=window.innerHeight;this.canvas.width=t*window.devicePixelRatio,this.canvas.height=e*window.devicePixelRatio,this.canvas.style.width=t+"px",this.canvas.style.height=e+"px",this.renderer.resize(t,e),this.cropper&&this.cropper.resize(),this.resizer&&this.resizer.resize()},t}()},{"../../../lib/animation":14,"./crop/Cropper":5}],3:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();i.HitSide=function(){function t(){n(this,t)}return o(t,null,[{key:"NONE",get:function(){return"none"}},{key:"LEFT",get:function(){return"left"}},{key:"TOP",get:function(){return"top"}},{key:"RIGHT",get:function(){return"right"}},{key:"BOTTOM",get:function(){return"bottom"}},{key:"LEFT_TOP",get:function(){return"left-top"}},{key:"LEFT_BOTTOM",get:function(){return"left-bottom"}},{key:"RIGHT_TOP",get:function(){return"right-top"}},{key:"RIGHT_BOTTOM",get:function(){return"right-bottom"}}]),t}()},{}],4:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();i.KeyCode=function(){function t(){n(this,t)}return o(t,null,[{key:"NUM_0",get:function(){return 48}},{key:"NUM_1",get:function(){return 49}},{key:"NUM_2",get:function(){return 50}},{key:"NUM_3",get:function(){return 51}},{key:"NUM_4",get:function(){return 52}},{key:"SPACE",get:function(){return 32}},{key:"BACK_SPACE",get:function(){return 8}},{key:"ENTER",get:function(){return 13}},{key:"SHIFT",get:function(){return 16}},{key:"CTRL",get:function(){return 17}},{key:"ALT",get:function(){return 18}},{key:"ESC",get:function(){return 27}},{key:"LEFT_ARROW",get:function(){return 37}},{key:"RIGHT_ARROW",get:function(){return 39}},{key:"UP_ARROW",get:function(){return 38}},{key:"DOWN_ARROW",get:function(){return 40}},{key:"DELETE",get:function(){return 46}},{key:"F1",get:function(){return 112}},{key:"F2",get:function(){return 113}},{key:"F3",get:function(){return 114}},{key:"F4",get:function(){return 115}},{key:"Q",get:function(){return 81}},{key:"W",get:function(){return 87}},{key:"E",get:function(){return 69}},{key:"R",get:function(){return 82}},{key:"A",get:function(){return 65}},{key:"S",get:function(){return 83}},{key:"D",get:function(){return 68}},{key:"F",get:function(){return 70}},{key:"Z",get:function(){return 90}},{key:"X",get:function(){return 88}},{key:"C",get:function(){return 67}},{key:"V",get:function(){return 86}}]),t}()},{}],5:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0,i.Cropper=void 0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("../utils/Calculator"),h=t("../ui/ResizeUI"),u=t("../ui/RotateUI"),c=t("../ui/MoveUI"),l=t("../ui/imageUI"),d=t("../const/KeyCode"),g=t("../const/HitSide"),p=t("../utils/Painter");i.Cropper=function(t){function e(i,r,s){n(this,e);var a=o(this,t.call(this));return a.initialize(i,r,s),a.addEvent(),a}return r(e,t),e.prototype.initialize=function(t,e,i){this.paddingX=216,this.paddingY=158,this.canvas=t,this.imageElement=e,this.textureCanvas=i,this.isInitialize=!1,this._stageRotation=0,this.limitRotation=a.Calc.toRadians(45),this.maxRotation=this.limitRotation,this.minRotation=-this.limitRotation,this.rotation90=a.Calc.toRadians(90),this.image=new l.ImageUI(this.textureCanvas),this.moveUI=new c.MoveUI(this.canvas),this.rotateUI=new u.RotateUI(this.canvas),this.resizeUI=new h.ResizeUI(this.canvas),this.addChild(this.image),this.addChild(this.rotateUI),this.addChild(this.moveUI),this.addChild(this.resizeUI),this.gGrid=new PIXI.Graphics,this.gLine=new PIXI.Graphics,this.gLens=new PIXI.Graphics,this.gImage=new PIXI.Graphics,this.gBounds=new PIXI.Graphics,this.gRotate=new PIXI.Graphics,this.gMove=new PIXI.Graphics,this.gTest=new PIXI.Graphics,this.addChild(this.gLens),this.addChild(this.gLine),this.addChild(this.gGrid),this.addChild(this.gImage),this.addChild(this.gBounds),this.addChild(this.gRotate),this.addChild(this.gMove),this.addChild(this.gTest)},e.prototype.clearGraphics=function(){this.gLens.clear(),this.gLine.clear(),this.gGrid.clear(),this.gImage.clear(),this.gBounds.clear(),this.gRotate.clear(),this.gMove.clear(),this.gTest.clear()},e.prototype.addEvent=function(){var t=this;window.document.addEventListener("keyup",function(e){switch(e.keyCode){case d.KeyCode.ESC:console.clear();break;case d.KeyCode.SPACE:console.log(t.image.toString());break;case d.KeyCode.NUM_1:case d.KeyCode.NUM_2:case d.KeyCode.NUM_3:case d.KeyCode.NUM_4:t.testPivot(e.keyCode);break;case d.KeyCode.C:t.clearGraphics();break;case d.KeyCode.R:t.rotate()}}),this.moveUI.on("moveStart",this.moveStart.bind(this)),this.moveUI.on("moveChange",this.moveChange.bind(this)),this.moveUI.on("moveEnd",this.moveEnd.bind(this)),this.rotateUI.on("rotateStart",this.rotateStart.bind(this)),this.rotateUI.on("rotateChange",this.rotateChange.bind(this)),this.rotateUI.on("rotateEnd",this.rotateEnd.bind(this)),this.resizeUI.on("cornerResizeStart",this.cornerResizeStart.bind(this)),this.resizeUI.on("cornerResizeChange",this.cornerResizeChange.bind(this)),this.resizeUI.on("cornerResizeEnd",this.cornerResizeEnd.bind(this))},e.prototype.update=function(){},e.prototype.resize=function(){if(0==this.isInitialize){this.isInitialize=!0,this.initializeImage();var t=this.image.bounds;this.resizeUI.resize(t),this.moveUI.setSize(this.resizeUI.bounds),this.test()}else{var e=this.resizeUI.bounds;this.magnifyImage(e),this.moveUI.setSize(e)}this.rotateUI.resize(),this.gImage.clear(),this.gRotate.clear()},e.prototype.initializeImage=function(){var t=a.Calc.getImageSizeKeepAspectRatio(this.image,this.bounds);this.image.width=t.width,this.image.height=t.height,this.image.x=this.canvas.width/2,this.image.y=this.canvas.height/2,this.image.updatePrevLtPointForPivot()},e.prototype.test=function(){},e.prototype.testNextPosition=function(){var t=this.canvas.width/2,e=this.canvas.height/2,i=a.Calc.toRadians(30),n=a.Calc.toRadians(45),o=a.Calc.getNextMovePosition(t,e,30,n),r=a.Calc.getNextMovePosition(t,e,-30,n),s=a.Calc.getNextMovePosition(t,e,60,-n),h=a.Calc.getNextMovePosition(t,e,90,i),u=a.Calc.getNextMovePosition(t,e,90,-i);p.Painter.drawCircle(this.gTest,{x:t,y:e},4,0),p.Painter.drawCircle(this.gTest,o,4),p.Painter.drawCircle(this.gTest,r,4),p.Painter.drawCircle(this.gTest,s,4),p.Painter.drawCircle(this.gTest,h,4),p.Painter.drawCircle(this.gTest,u,4)},e.prototype.testNextPoint=function(){this.prevX=this.canvas.width/2,this.prevY=this.canvas.height/2;for(var t=a.Calc.toRadians(45)-a.Calc.toRadians(90),e=0;e<90;e++){var i=this.prevX+2*Math.cos(t),n=this.prevY+2*Math.sin(t);this.prevX=i,this.prevY=n}},e.prototype.testPivot=function(t){var e;switch(t){case d.KeyCode.NUM_1:e=0,this.image.setPivot({x:e,y:e});break;case d.KeyCode.NUM_2:e=-10,this.image.setPivot({x:e,y:e});break;case d.KeyCode.NUM_3:e=-20,this.image.setPivot({x:e,y:e});break;case d.KeyCode.NUM_4:e=-30,this.image.setPivot({x:e,y:e})}},e.prototype.setImagePivot=function(){var t=this.canvas.width/2,e=this.canvas.height/2;this.image.setPivot({x:t,y:e})},e.prototype.moveStart=function(t){this.isHit=!1,this.prevImageX=this.image.x,this.prevImageY=this.image.y,this.image.updatePrevLtPointForPivot()},e.prototype.moveChange=function(t){var e,i=t.change.x,n=t.change.y,o=(Math.abs(i),Math.abs(n),this.prevImageX),r=this.prevImageY,s=this.image.rotation;if(this.image.x+=i,this.image.y+=n,!1===this.image.isContainsBounds(this.resizeUI))if(this.isHit){switch(this.image.getHitSide(this.resizeUI)){case g.HitSide.LEFT:case g.HitSide.RIGHT:e=a.Calc.getNextMovePosition(o,r,n,s+this.rotation90);break;case g.HitSide.TOP:case g.HitSide.BOTTOM:e=a.Calc.getNextMovePosition(o,r,i,s);break;default:this.image.fixMove(this.resizeUI,this.stageRotation)}e&&(this.image.x=e.x,this.image.y=e.y)}else this.isHit=!0,this.image.fixMove(this.resizeUI,this.stageRotation);else this.isHit=!1;this.image.isContainsBounds(this.resizeUI)?(this.prevImageX=this.image.x,this.prevImageY=this.image.y):(this.image.x=this.prevImageX,this.image.y=this.prevImageY),this.image.updatePrevLtPointForPivot()},e.prototype.moveEnd=function(t){this.setImagePivot(),this.image.updatePrevLtPointForPivot()},e.prototype.rotateStart=function(t){console.log("1",a.Calc.trace(this.image.x),a.Calc.trace(this.image.y)),this.setImagePivot(),console.log("2",a.Calc.trace(this.image.x),a.Calc.trace(this.image.y)),this.resizeUIPoints=this.resizeUI.points,this.image.updatePrevLtPointForPivot()},e.prototype.rotateChange=function(t){if(this.image.rotation+=t.change,this.image.rotation<this.minRotation&&(this.image.rotation=this.minRotation),this.image.rotation>this.maxRotation&&(this.image.rotation=this.maxRotation),!1===this.image.isContainsBounds(this.resizeUI)){var e={x:this.image.x,y:this.image.y},i=a.Calc.getRotationRectanglePoints(e,this.resizeUIPoints,a.Calc.toDegrees(this.image.rotation)),n=a.Calc.getBoundsRectangle(i),o=a.Calc.getBoundsScale(n,this.image),r=this.image.width,s=this.image.height,h=r*o.max,u=s*o.max;r<=h&&s<=u&&(this.image.width=h,this.image.height=u),this.image.fixMove(this.resizeUI,this.stageRotation)}this.image.updatePrevLtPointForPivot()},e.prototype.rotate=function(){var t=a.Calc.toRadians(-90);this.image.rotation+=t,this.image.rotatePoints(),this.image.updatePrevLtPointForPivot();var e=this.resizeUI.rotationPoints,i=this.resizeUI.pointsToBounds(e),n=a.Calc.getBoundsScale(this.bounds,i).min,o=a.Calc.getImageSizeKeepAspectRatio(i,this.bounds);o.x=this.canvas.width/2-o.width/2,o.y=this.canvas.height/2-o.height/2,this.resizeUI.setSize(o),this.moveUI.setSize(this.resizeUI.bounds),this.resizeUIPoints=this.resizeUI.points,this.image.width=this.image.width*n,this.image.height=this.image.height*n,this.stageRotation+=t,this.maxRotation=this.stageRotation+this.limitRotation,this.minRotation=this.stageRotation-this.limitRotation},e.prototype.rotateEnd=function(t){this.image.updatePrevLtPointForPivot()},e.prototype.cornerResizeStart=function(t){this.startLensBounds=this.resizeUI.bounds,this.image.updatePrevLtPointForPivot()},e.prototype.magnifyImage=function(t){var e=this.image.lt.x-t.x,i=this.image.lt.y-t.y,n=a.Calc.getBoundsScale(this.bounds,t).min,o=a.Calc.getImageSizeKeepAspectRatio(t,this.bounds);o.x=this.canvas.width/2-o.width/2,o.y=this.canvas.height/2-o.height/2,this.resizeUI.setSize(o),this.image.width=this.image.width*n,this.image.height=this.image.height*n;var r=e*n,s=i*n,h=this.image.x-this.image.lt.x,u=this.image.y-this.image.lt.y;this.image.x=o.x+r+h,this.image.y=o.y+s+u,this.image.updatePrevLtPointForPivot()},e.prototype.cornerResizeChange=function(t){var e,i=t.dx,n=t.dy,o=t.target,r=o.x+i,s=o.y+n,a=2*i,h=2*n;r>this.startLensBounds.x&&r<this.startLensBounds.x+this.startLensBounds.width&&s>this.startLensBounds.y&&s<this.startLensBounds.y+this.startLensBounds.height?(e=this.resizeUI.getCornerUpdatePoints(o,r,s),this.image.isContainsBounds(e)?this.resizeUI.setPoint(e):(e=this.resizeUI.fixCorner(o,e,this.image),this.resizeUI.setPoint(e))):(e=this.resizeUI.getCornerUpdatePoints(o,r+a,s+h),this.image.isContainsBounds(e)?this.resizeUI.setPoint(e):(e=this.resizeUI.fixCorner(o,e,this.image),this.resizeUI.setPoint(e)),this.magnifyImage(this.resizeUI.bounds)),this.moveUI.setSize(this.resizeUI.bounds),this.image.updatePrevLtPointForPivot()},e.prototype.cornerResizeEnd=function(t){this.magnifyImage(this.resizeUI.bounds),this.moveUI.setSize(this.resizeUI.bounds),this.gLens.clear(),this.setImagePivot(),this.image.updatePrevLtPointForPivot()},e.prototype.displayImageRotationBounds=function(){var t=a.Calc.getImageSizeKeepAspectRatio(this.image,this.bounds),e={lt:{x:0,y:0},rt:{x:t.width,y:0},rb:{x:t.width,y:t.height},lb:{x:0,y:t.height}},i=a.Calc.getRotationRectanglePoints({x:t.width/2,y:t.height/2},e,a.Calc.toDegrees(this.image.rotation)),n=a.Calc.getBoundsRectangle(i);n.x=this.canvas.width/2-n.width/2,n.y=this.canvas.height/2-n.height/2},s(e,[{key:"bounds",get:function(){var t=this.canvas.width,e=this.canvas.height,i=t-this.paddingX,n=e-this.paddingY;return{width:i,height:n,x:t/2-i/2,y:e/2-n/2}}},{key:"stageRotation",set:function(t){this._stageRotation=t},get:function(){return this._stageRotation}}]),e}(PIXI.Container)},{"../const/HitSide":3,"../const/KeyCode":4,"../ui/MoveUI":8,"../ui/ResizeUI":9,"../ui/RotateUI":10,"../ui/imageUI":11,"../utils/Calculator":12,"../utils/Painter":13}],6:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();i.ControlArea=function(t){function e(i){n(this,e);var r=o(this,t.call(this));return r.initialize(i),r.draw(i),r}return r(e,t),s(e,null,[{key:"ROW",get:function(){return"row"}},{key:"COL",get:function(){return"col"}},{key:"CORNER",get:function(){return"corner"}}]),e.prototype.initialize=function(t){this.type=t,this.globalAlpha=0,this.interactive=!0,this.graphics=new PIXI.Graphics,this.addChild(this.graphics)},e.prototype.draw=function(t){switch(this.graphics.clear(),t){case e.ROW:this.graphics.beginFill(16724736,this.globalAlpha),this.graphics.drawRect(0,-16,1,32);break;case e.COL:this.graphics.beginFill(16724736,this.globalAlpha),this.graphics.drawRect(-16,0,32,1);break;case e.CORNER:this.graphics.beginFill(4359668,this.globalAlpha),this.graphics.drawRect(-16,-16,32,32)}this.graphics.endFill()},e}(PIXI.Sprite)},{}],7:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();i.CornerShape=function(t){function e(i){n(this,e);var r=o(this,t.call(this));return r.initialize(),r.draw(i),r}return r(e,t),s(e,null,[{key:"LEFT_TOP",get:function(){return"leftTop"}},{key:"RIGHT_TOP",get:function(){return"rightTop"}},{key:"RIGHT_BOTTOM",get:function(){return"rightBottom"}},{key:"LEFT_BOTTOM",get:function(){return"leftBottom"}}]),e.prototype.initialize=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32;this.type=t,this.size=i,this.half=i/2,this.thickness=e,this.interactive=!0,this.graphics=new PIXI.Graphics,this.buttonArea=new PIXI.Graphics,this.addChild(this.graphics),this.addChild(this.buttonArea)},e.prototype.draw=function(t){switch(this.drawButtonArea(),t){case e.LEFT_TOP:this.drawLeftTop();break;case e.RIGHT_TOP:this.drawRightTop();break;case e.RIGHT_BOTTOM:this.drawRightBottom();break;case e.LEFT_BOTTOM:this.drawLeftBottom()}},e.prototype.drawButtonArea=function(){var t=this.half,e=this.size;this.buttonArea.clear(),this.buttonArea.beginFill(4359668,.1),this.buttonArea.drawRect(-t,-t,e,e),this.buttonArea.endFill()},e.prototype.drawLeftTop=function(){var t=this.half,e=this.thickness;this.graphics.clear(),this.graphics.beginFill(4359668),this.graphics.drawRect(-e,-e,t,e),this.graphics.drawRect(-e,-e,e,t),this.graphics.endFill()},e.prototype.drawRightTop=function(){var t=this.half,e=this.thickness;this.graphics.clear(),this.graphics.beginFill(4359668),this.graphics.drawRect(-(t-e),-e,t,e),this.graphics.drawRect(0,-e,e,t),this.graphics.endFill()},e.prototype.drawRightBottom=function(){var t=this.half,e=this.thickness;this.graphics.clear(),this.graphics.beginFill(4359668),this.graphics.drawRect(-(t-e),0,t,e),this.graphics.drawRect(0,e,e,-t),this.graphics.endFill()},e.prototype.drawLeftBottom=function(){var t=this.half,e=this.thickness;this.graphics.clear(),this.graphics.beginFill(4359668),this.graphics.drawRect(-e,0,t,e),this.graphics.drawRect(-e,e,e,-t),this.graphics.endFill()},e}(PIXI.Sprite)},{}],8:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0,i.MoveUI=void 0;t("../utils/Calculator"),i.MoveUI=function(t){function e(i){n(this,e);var r=o(this,t.call(this));return r.initialize(i),r.render(),r.addMouseDownEvent(),r}return r(e,t),e.prototype.initialize=function(t){this.canvas=t,this.interactive=!0,this.graphics=new PIXI.Graphics,this.addChild(this.graphics)},e.prototype.render=function(){this.graphics.clear(),this.graphics.beginFill(4359668,0),this.graphics.drawRect(0,0,1,1),this.graphics.endFill()},e.prototype.setSize=function(t){this.graphics.width=t.width,this.graphics.height=t.height,this.graphics.x=this.canvas.width/2-this.graphics.width/2,this.graphics.y=this.canvas.height/2-this.graphics.height/2},e.prototype.addMouseDownEvent=function(){this._mouseDownListener=this.onMouseDown.bind(this),this.on("mousedown",this._mouseDownListener),this.on("touchstart",this._mouseDownListener)},e.prototype.removeMouseDownEvent=function(){this.off("mousedown",this._mouseDownListener),this.off("touchstart",this._mouseDownListener)},e.prototype.addMouseMoveEvent=function(){this._mouseMoveListener=this.onMouseMove.bind(this),this._mouseUpListener=this.onMouseUp.bind(this),window.document.addEventListener("mousemove",this._mouseMoveListener),window.document.addEventListener("mouseup",this._mouseUpListener),window.document.addEventListener("touchmove",this._mouseMoveListener),window.document.addEventListener("touchend",this._mouseUpListener)},e.prototype.removeMouseMoveEvent=function(){window.document.removeEventListener("mousemove",this._mouseMoveListener),window.document.removeEventListener("mouseup",this._mouseUpListener),window.document.removeEventListener("touchmove",this._mouseMoveListener),window.document.removeEventListener("touchend",this._mouseUpListener)},e.prototype.onMouseDown=function(t){this.prevMousePoint={x:t.data.global.x,y:t.data.global.y},this.emit("moveStart"),t.stopPropagation(),this.addMouseMoveEvent(),this.removeMouseDownEvent()},e.prototype.onMouseMove=function(t){this.currentMousePoint={x:t.clientX,y:t.clientY},this.change={x:this.currentMousePoint.x-this.prevMousePoint.x,y:this.currentMousePoint.y-this.prevMousePoint.y},this.emit("moveChange",{prevMousePoint:this.prevMousePoint,currentMousePoint:this.currentMousePoint,change:this.change}),this.prevMousePoint=this.currentMousePoint},e.prototype.onMouseUp=function(t){this.emit("moveEnd"),this.addMouseDownEvent(),this.removeMouseMoveEvent()},e}(PIXI.Sprite)},{"../utils/Calculator":12}],9:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0,i.ResizeUI=void 0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("./CornerShape"),h=t("./ControlArea"),u=t("../utils/Calculator"),c=(t("../utils/Painter"),t("../const/HitSide"));i.ResizeUI=function(t){function e(i){n(this,e);var r=o(this,t.call(this));return r.initialize(i),r.addCornerDownEvent(),r}return r(e,t),e.prototype.initialize=function(t){this.offset=-1,this.canvas=canvas,this.imageRect=new PIXI.Graphics,this.topControl=new h.ControlArea(h.ControlArea.ROW),this.bottomControl=new h.ControlArea(h.ControlArea.ROW),this.leftControl=new h.ControlArea(h.ControlArea.COL),this.rightControl=new h.ControlArea(h.ControlArea.COL),this.lt=new a.CornerShape(a.CornerShape.LEFT_TOP),this.rt=new a.CornerShape(a.CornerShape.RIGHT_TOP),this.rb=new a.CornerShape(a.CornerShape.RIGHT_BOTTOM),this.lb=new a.CornerShape(a.CornerShape.LEFT_BOTTOM),this.addChild(this.imageRect),this.addChild(this.topControl),this.addChild(this.bottomControl),this.addChild(this.leftControl),this.addChild(this.rightControl),this.addChild(this.lt),this.addChild(this.rt),this.addChild(this.rb),this.addChild(this.lb),this.gDebug=new PIXI.Graphics,this.addChild(this.gDebug)},e.prototype.resize=function(t){this.resizeCornerShape(t),this.resizeControl(),this.drawImageRect()},e.prototype.resizeCornerShape=function(t){this.lt.x=t.x-this.offset,this.lt.y=t.y-this.offset,this.rt.x=t.x+t.width+this.offset,this.rt.y=t.y-this.offset,this.rb.x=this.rt.x+this.offset,this.rb.y=t.y+t.height+this.offset,this.lb.x=this.lt.x-this.offset,this.lb.y=this.rb.y+this.offset},e.prototype.resizeControl=function(){this.topControl.x=this.lt.x,this.topControl.y=this.lt.y,this.topControl.width=this.rt.x-this.lt.x,this.bottomControl.x=this.lb.x,this.bottomControl.y=this.lb.y,this.bottomControl.width=this.topControl.width,this.leftControl.x=this.lt.x,this.leftControl.y=this.lt.y,this.leftControl.height=this.rb.y-this.lt.y,this.rightControl.x=this.rt.x,this.rightControl.y=this.rt.y,this.rightControl.height=this.leftControl.height},e.prototype.drawImageRect=function(){this.imageRect.clear(),this.imageRect.lineStyle(2,10395294),this.imageRect.moveTo(this.lt.x,this.lt.y),this.imageRect.lineTo(this.rt.x,this.rt.y),this.imageRect.lineTo(this.rb.x,this.rb.y),this.imageRect.lineTo(this.lb.x,this.lb.y),this.imageRect.lineTo(this.lt.x,this.lt.y),this.imageRect.endFill()},e.prototype.updateOtherCorner=function(t){switch(t){case this.lt:this.rt.y=this.lt.y,this.lb.x=this.lt.x;break;case this.rt:this.lt.y=this.rt.y,this.rb.x=this.rt.x;break;case this.rb:this.rt.x=this.rb.x,this.lb.y=this.rb.y;break;case this.lb:this.lt.x=this.lb.x,this.rb.y=this.lb.y}this.drawImageRect()},e.prototype.setSize=function(t){var e=t.x,i=t.y,n=t.width,o=t.height;this.lt.x=e,this.lt.y=i,this.rt.x=e+n,this.rt.y=i,this.rb.x=this.rt.x,this.rb.y=i+o,this.lb.x=e,this.lb.y=this.rb.y,this.drawImageRect()},e.prototype.setPoint=function(t){this.lt.x=t.lt.x,this.lt.y=t.lt.y,this.rt.x=t.rt.x,this.rt.y=t.rt.y,this.rb.x=t.rb.x,this.rb.y=t.rb.y,this.lb.x=t.lb.x,this.lb.y=t.lb.y,this.drawImageRect()},e.prototype.getCornerUpdatePoints=function(t,e,i){var n=this.points;switch(t){case this.lt:n.lt.x=e,n.lt.y=i,n.rt.y=n.lt.y,n.lb.x=n.lt.x;break;case this.rt:n.rt.x=e,n.rt.y=i,n.lt.y=n.rt.y,n.rb.x=n.rt.x;break;case this.rb:n.rb.x=e,n.rb.y=i,n.rt.x=n.rb.x,n.lb.y=n.rb.y;break;case this.lb:n.lb.x=e,n.lb.y=i,n.lt.x=n.lb.x,n.rb.y=n.lb.y}return n},e.prototype.fixCorner=function(t,e,i){for(var n=i.getHitPoints(e),o=0;o<n.length;o++){var r,s=n[o],a=s.point;switch(s.hitSide){case c.HitSide.LEFT:r=this.getLeft(e,i),e=this.getCornerUpdatePoints(a,r.x,r.y);break;case c.HitSide.RIGHT:r=this.getRight(e,i),e=this.getCornerUpdatePoints(a,r.x,r.y);break;case c.HitSide.TOP:r=this.getTop(e,i),e=this.getCornerUpdatePoints(a,r.x,r.y);break;case c.HitSide.BOTTOM:r=this.getBottom(e,i),e=this.getCornerUpdatePoints(a,r.x,r.y)}}return e},e.prototype.getLeft=function(t,e){var i,n;return i=e.isOutLeftLine(t.lt)?e.getLeftIntersectionPoint(t.lt).x:e.isOutTopLine(t.lt)?e.getTopIntersectionPoint(t.lt).x:e.isOutBottomLine(t.lt)?e.getBottomIntersectionPoint(t.lt).x:t.lt.x,n=e.isOutLeftLine(t.lb)?e.getLeftIntersectionPoint(t.lb).x:e.isOutTopLine(t.lb)?e.getTopIntersectionPoint(t.lb).x:e.isOutBottomLine(t.lb)?e.getBottomIntersectionPoint(t.lb).x:t.lb.x,Math.max(i,n)},e.prototype.getTop=function(t,e){var i,n;return i=e.isOutTopLine(t.lt)?e.getTopIntersectionPoint(t.lt).y:e.isOutLeftLine(t.lt)?e.getLeftIntersectionPoint(t.lt).y:e.isOutRightLine(t.lt)?e.getRightIntersectionPoint(t.lt).y:t.lt.y,n=e.isOutTopLine(t.rt)?e.getTopIntersectionPoint(t.rt).y:e.isOutLeftLine(t.rt)?e.getLeftIntersectionPoint(t.rt).y:e.isOutRightLine(t.rt)?e.getRightIntersectionPoint(t.rt).y:t.rt.y,Math.max(i,n)},e.prototype.getRight=function(t,e){var i,n;return i=e.isOutRightLine(t.rt)?e.getRightIntersectionPoint(t.rt).x:e.isOutTopLine(t.rt)?e.getTopIntersectionPoint(t.rt).x:e.isOutBottomLine(t.rt)?e.getBottomIntersectionPoint(t.rt).x:t.rt.x,n=e.isOutRightLine(t.rb)?e.getRightIntersectionPoint(t.rb).x:e.isOutTopLine(t.rb)?e.getTopIntersectionPoint(t.rb).x:e.isOutBottomLine(t.rb)?e.getBottomIntersectionPoint(t.rb).x:t.rb.x,Math.min(i,n)},e.prototype.getBottom=function(t,e){var i,n;return i=e.isOutBottomLine(t.rb)?e.getBottomIntersectionPoint(t.rb).y:e.isOutLeftLine(t.rb)?e.getLeftIntersectionPoint(t.rb).y:e.isOutRightLine(t.rb)?e.getRightIntersectionPoint(t.rb).y:t.rb.y,n=e.isOutBottomLine(t.lb)?e.getBottomIntersectionPoint(t.lb).y:e.isOutLeftLine(t.lb)?e.getLeftIntersectionPoint(t.lb).y:e.isOutRightLine(t.lb)?e.getRightIntersectionPoint(t.lb).y:t.lb.y,Math.min(i,n)},e.prototype.pointsToBounds=function(t){return{x:t.lt.x,y:t.lt.y,width:t.rt.x-t.lt.x,height:t.rb.y-t.rt.y}},e.prototype.isLtInsideBounds=function(t){return u.Calc.isInsideSquare(this.lt,t.lt,t.rt,t.rb,t.lb)},e.prototype.isRtInsideBounds=function(t){return u.Calc.isInsideSquare(this.rt,t.lt,t.rt,t.rb,t.lb)},e.prototype.isRbInsideBounds=function(t){return u.Calc.isInsideSquare(this.rb,t.lt,t.rt,t.rb,t.lb)},e.prototype.isLbInsideBounds=function(t){return u.Calc.isInsideSquare(this.lb,t.lt,t.rt,t.rb,t.lb)},e.prototype.onCornerDown=function(t){t.stopPropagation(),this.selectedTarget=t.target,this.dragStartX=this.prevDragX=t.data.global.x,this.dragStartY=this.prevDragY=t.data.global.y,this.addCornerMoveEvent(),this.removeCornerDownEvent(),this.emit("cornerResizeStart",{target:this.selectedTarget,dragStartX:this.dragStartX,dragStartY:this.dragStartY})},e.prototype.onCornerMove=function(t){this.currentDragX=t.clientX,this.currentDragY=t.clientY,this.dx=this.currentDragX-this.prevDragX,this.dy=this.currentDragY-this.prevDragY,this.emit("cornerResizeChange",{dx:this.dx,dy:this.dy,prevX:this.prevDragX,prevY:this.prevDragY,target:this.selectedTarget}),this.prevDragX=this.currentDragX,this.prevDragY=this.currentDragY},e.prototype.onCornerUp=function(t){this.addCornerDownEvent(),this.removeCornerMoveEvent(),this.emit("cornerResizeEnd",{target:this.selectedTarget}),this.selectedTarget=null},e.prototype.addCornerDownEvent=function(){this._cornerDownListener=this.onCornerDown.bind(this),this.lt.on("mousedown",this._cornerDownListener),this.rt.on("mousedown",this._cornerDownListener),this.rb.on("mousedown",this._cornerDownListener),this.lb.on("mousedown",this._cornerDownListener),this.lt.on("touchstart",this._cornerDownListener),this.rt.on("touchstart",this._cornerDownListener),this.rb.on("touchstart",this._cornerDownListener),this.lb.on("touchstart",this._cornerDownListener)},e.prototype.removeCornerDownEvent=function(){this.lt.off("mousedown",this._cornerDownListener),this.rt.off("mousedown",this._cornerDownListener),this.rb.off("mousedown",this._cornerDownListener),this.lb.off("mousedown",this._cornerDownListener),this.lt.off("touchstart",this._cornerDownListener),this.rt.off("touchstart",this._cornerDownListener),this.rb.off("touchstart",this._cornerDownListener),this.lb.off("touchstart",this._cornerDownListener)},e.prototype.addCornerMoveEvent=function(){this._cornerUpListener=this.onCornerUp.bind(this),this._cornerMoveListener=this.onCornerMove.bind(this),window.document.addEventListener("mouseup",this._cornerUpListener),window.document.addEventListener("mousemove",this._cornerMoveListener),window.document.addEventListener("touchmove",this._cornerUpListener),window.document.addEventListener("touchend",this._cornerMoveListener)},e.prototype.removeCornerMoveEvent=function(){window.document.removeEventListener("mouseup",this._cornerUpListener),window.document.removeEventListener("mousemove",this._cornerMoveListener),window.document.removeEventListener("touchmove",this._cornerUpListener),window.document.removeEventListener("touchend",this._cornerMoveListener)},s(e,[{key:"bounds",get:function(){return{x:this.lt.x,y:this.lt.y,width:this.rt.x-this.lt.x,height:this.rb.y-this.rt.y}}},{key:"points",get:function(){return{lt:{x:this.lt.x,y:this.lt.y},rt:{x:this.rt.x,y:this.rt.y},rb:{x:this.rb.x,y:this.rb.y},lb:{x:this.lb.x,y:this.lb.y}}}},{key:"rotationPoints",get:function(){var t={x:this.cx,y:this.cy};return{lt:u.Calc.getRotationPoint(t,this.rt,-90),rt:u.Calc.getRotationPoint(t,this.rb,-90),rb:u.Calc.getRotationPoint(t,this.lb,-90),lb:u.Calc.getRotationPoint(t,this.lt,-90)}}},{key:"cx",get:function(){return this.lt.x+this.bounds.width/2}},{key:"cy",get:function(){return this.lt.y+this.bounds.height/2}},{key:"isMinWidth",get:function(){var t=this.bounds,e=2*this.size+this.half;return t.width<e}},{key:"isMinHeight",get:function(){var t=this.bounds,e=2*this.size+this.half;return t.height<e}}]),e}(PIXI.Container)},{"../const/HitSide":3,"../utils/Calculator":12,"../utils/Painter":13,"./ControlArea":6,"./CornerShape":7}],10:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0,i.RotateUI=void 0;var s=t("../utils/Calculator");i.RotateUI=function(t){function e(i){n(this,e);var r=o(this,t.call(this));return r.initialize(i),r.render(),r.addMouseDownEvent(),r}return r(e,t),e.prototype.initialize=function(t){this.canvas=t,this.interactive=!0,this.graphics=new PIXI.Graphics,this.addChild(this.graphics)},e.prototype.render=function(){this.graphics.clear(),this.graphics.beginFill(16711935,0),this.graphics.drawRect(0,0,1,1),this.graphics.endFill()},e.prototype.resize=function(){this.graphics.width=this.canvas.width,this.graphics.height=this.canvas.height,this.centerX=this.canvas.width/2,this.centerY=this.canvas.height/2},e.prototype.addMouseDownEvent=function(){this._mouseDownListener=this.onMouseDown.bind(this),this.on("mousedown",this._mouseDownListener),this.on("touchstart",this._mouseDownListener)},e.prototype.removeMouseDownEvent=function(){this.off("mousedown",this._mouseDownListener),this.off("touchstart",this._mouseDownListener)},e.prototype.addMouseMoveEvent=function(){this._mouseMoveListener=this.onMouseMove.bind(this),this._mouseUpListener=this.onMouseUp.bind(this),window.document.addEventListener("mousemove",this._mouseMoveListener),window.document.addEventListener("mouseup",this._mouseUpListener),window.document.addEventListener("touchmove",this._mouseMoveListener),window.document.addEventListener("touchend",this._mouseUpListener)},e.prototype.removeMouseMoveEvent=function(){window.document.removeEventListener("mousemove",this._mouseMoveListener),window.document.removeEventListener("mouseup",this._mouseUpListener),window.document.removeEventListener("touchmove",this._mouseMoveListener),window.document.removeEventListener("touchend",this._mouseUpListener)},e.prototype.onMouseDown=function(t){this.prevRotation=s.Calc.getRotation({x:this.centerX,y:this.centerY},{x:t.data.global.x,y:t.data.global.y}),this.emit("rotateStart",{prevRotation:this.prevRotation,currentRotation:this.prevRotation,currentRadian:s.Calc.toRadians(this.prevRotation)}),t.stopPropagation(),this.addMouseMoveEvent(),this.removeMouseDownEvent()},e.prototype.onMouseMove=function(t){this.currentRotation=s.Calc.getRotation({x:this.centerX,y:this.centerY},{x:t.clientX,y:t.clientY}),this.change=this.currentRotation-this.prevRotation,this.absChange=this.change<0?-1*this.change:this.change,this.absChange<100&&this.emit("rotateChange",{prevRotation:this.prevRotation,currentRotation:this.currentRotation,currentRadian:s.Calc.toRadians(this.currentRotation),change:s.Calc.toRadians(this.change)}),this.prevRotation=this.currentRotation},e.prototype.onMouseUp=function(t){this.emit("rotateEnd"),this.addMouseDownEvent(),this.removeMouseMoveEvent()},e}(PIXI.Sprite)},{"../utils/Calculator":12}],11:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0,i.ImageUI=void 0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("../utils/Calculator"),h=(t("../utils/Painter"),t("../const/HitSide"));i.ImageUI=function(t){function e(i){n(this,e);var r=o(this,t.call(this));return r.initialize(i),r.addDebugPoint(),r}return r(e,t),e.prototype.initialize=function(t){this.textureCanvas=t,this.image=new PIXI.Sprite(new PIXI.Texture(new PIXI.BaseTexture(t))),this.image.x=-this.image.width/2,this.image.y=-this.image.height/2,this.addChild(this.image),this.ltp=new PIXI.Sprite,this.rtp=new PIXI.Sprite,this.rbp=new PIXI.Sprite,this.lbp=new PIXI.Sprite,this.ltp.x=this.image.x,this.ltp.y=this.image.y,this.rtp.x=this.image.x+this.image.width,this.rtp.y=this.image.y,this.rbp.x=this.image.x+this.image.width,this.rbp.y=this.image.y+this.image.height,this.lbp.x=this.image.x,this.lbp.y=this.image.y+this.image.height,this.addChild(this.ltp),this.addChild(this.rtp),this.addChild(this.rbp),this.addChild(this.lbp)},e.prototype.addDebugPoint=function(){return this.hitSprite=new PIXI.Sprite,this.hitSprite.alpha=0,this.hitColorRect=new PIXI.Graphics,this.hitColorRect.beginFill(16724736,.3),this.hitColorRect.drawRect(-this.width/2,-this.height/2,this.width,this.height),this.hitColorRect.endFill(),this.addChild(this.hitSprite),void this.hitSprite.addChild(this.hitColorRect)},e.prototype.rotatePoints=function(){var t={x:this.rtp.x,y:this.rtp.y},e={x:this.rbp.x,y:this.rbp.y},i={x:this.lbp.x,y:this.lbp.y},n={x:this.ltp.x,y:this.ltp.y};this.ltp.x=t.x,this.ltp.y=t.y,this.rtp.x=e.x,this.rtp.y=e.y,this.rbp.x=i.x,this.rbp.y=i.y,this.lbp.x=n.x,this.lbp.y=n.y},e.prototype.getMoveUpdatePoints=function(t,e){var i=this.points;return i.lt.x+=t,i.lt.y+=e,i.rt.x+=t,i.rt.y+=e,i.rb.x+=t,i.rb.y+=e,i.lb.x+=t,i.lb.y+=e,i},e.prototype.fixMove=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.rotation-e>0?(this.isOutLeftLine(t.lt)&&!1===t.isLtInsideBounds(this)&&a.Calc.moveToCollision(this,t.lt,this.leftLine),this.isOutBottomLine(t.lb)&&!1===t.isLbInsideBounds(this)&&a.Calc.moveToCollision(this,t.lb,this.bottomLine),this.isOutTopLine(t.rt)&&!1===t.isRtInsideBounds(this)&&a.Calc.moveToCollision(this,t.rt,this.topLine),this.isOutRightLine(t.rb)&&!1===t.isRbInsideBounds(this)&&a.Calc.moveToCollision(this,t.rb,this.rightLine)):(this.isOutTopLine(t.lt)&&!1===t.isLtInsideBounds(this)&&a.Calc.moveToCollision(this,t.lt,this.topLine),this.isOutLeftLine(t.lb)&&!1===t.isLbInsideBounds(this)&&a.Calc.moveToCollision(this,t.lb,this.leftLine),this.isOutRightLine(t.rt)&&!1===t.isRtInsideBounds(this)&&a.Calc.moveToCollision(this,t.rt,this.rightLine),this.isOutBottomLine(t.rb)&&!1===t.isRbInsideBounds(this)&&a.Calc.moveToCollision(this,t.rb,this.bottomLine))},e.prototype.getImageMaxScale=function(t){var e=a.Calc.getImageSizeKeepAspectRatio(this,t),i=e.width,n=e.height,o=a.Calc.getDiagonal(i,n);return o/n},e.prototype.updatePrevLtPointForPivot=function(){this.prevLtX=this.lt.x,this.prevLtY=this.lt.y},e.prototype.setPivot=function(t){var e=this.toLocal(t);this.pivot=e,this.pivotGraphics&&(this.pivotGraphics.x=this.pivot.x,this.pivotGraphics.y=this.pivot.y);var i=this.lt.x-this.prevLtX,n=this.lt.y-this.prevLtY;this.x=this.x-i,this.y=this.y-n,this.updatePrevLtPointForPivot()},e.prototype.isOutLeftLine=function(t){return a.Calc.triangleArea(t,this.lb,this.lt)>0},e.prototype.isOutTopLine=function(t){return a.Calc.triangleArea(t,this.lt,this.rt)>0},e.prototype.isOutRightLine=function(t){return a.Calc.triangleArea(t,this.rt,this.rb)>0},e.prototype.isOutBottomLine=function(t){return a.Calc.triangleArea(t,this.rb,this.lb)>0},e.prototype.getLeftIntersectionPoint=function(t){return a.Calc.getShortestDistancePoint(t,this.lb,this.lt)},e.prototype.getTopIntersectionPoint=function(t){return a.Calc.getShortestDistancePoint(t,this.lt,this.rt)},e.prototype.getRightIntersectionPoint=function(t){return a.Calc.getShortestDistancePoint(t,this.rt,this.rb)},e.prototype.getBottomIntersectionPoint=function(t){return a.Calc.getShortestDistancePoint(t,this.rb,this.lb)},e.prototype.isContainsBounds=function(t){for(var e=[t.lt,t.rt,t.rb,t.lb],i=0;i<e.length;i++)if(!1===a.Calc.isInsideSquare(e[i],this.lt,this.rt,this.rb,this.lb))return!1;return!0},e.prototype.getHitSide=function(t){var e=this.lt,i=this.rt,n=this.rb,o=this.lb,r=h.HitSide.NONE;return(a.Calc.triangleArea(t.lt,o,e)>0||a.Calc.triangleArea(t.lb,o,e)>0)&&(r=h.HitSide.LEFT),(a.Calc.triangleArea(t.rt,i,n)>0||a.Calc.triangleArea(t.rb,i,n)>0)&&(r=h.HitSide.RIGHT),(a.Calc.triangleArea(t.lt,e,i)>0||a.Calc.triangleArea(t.rt,e,i)>0)&&(r=r===h.HitSide.NONE?h.HitSide.TOP:r+=","+h.HitSide.TOP),(a.Calc.triangleArea(t.rb,n,o)>0||a.Calc.triangleArea(t.lb,n,o)>0)&&(r=r===h.HitSide.NONE?h.HitSide.BOTTOM:r+=","+h.HitSide.BOTTOM),r},e.prototype.getHitPoints=function(t){var e=this.lt,i=this.rt,n=this.rb,o=this.lb,r=[];return a.Calc.triangleArea(t.lt,o,e)>0&&r.push({point:t.lt,hitSide:h.HitSide.LEFT}),a.Calc.triangleArea(t.lb,o,e)>0&&r.push({point:t.lb,hitSide:h.HitSide.LEFT}),a.Calc.triangleArea(t.rt,i,n)>0&&r.push({point:t.rt,hitSide:h.HitSide.RIGHT}),a.Calc.triangleArea(t.rb,i,n)>0&&r.push({point:t.rb,hitSide:h.HitSide.RIGHT}),a.Calc.triangleArea(t.lt,e,i)>0&&r.push({point:t.lt,hitSide:h.HitSide.TOP}),a.Calc.triangleArea(t.rt,e,i)>0&&r.push({point:t.rt,hitSide:h.HitSide.TOP}),a.Calc.triangleArea(t.rb,n,o)>0&&r.push({point:t.rb,hitSide:h.HitSide.BOTTOM}),a.Calc.triangleArea(t.lb,n,o)>0&&r.push({point:t.lb,hitSide:h.HitSide.BOTTOM}),r},e.prototype.getUpdatePoints=function(t,e){var i=this.image.points;return i.lt.x+=t,i.lt.y+=e,i.rt.x+=t,i.rt.y+=e,i.rb.x+=t,i.rb.y+=e,i.lb.x+=t,i.lb.y+=e,i},e.prototype.toString=function(){return"LT["+a.Calc.leadingZero(parseInt(this.lt.x))+", "+a.Calc.leadingZero(parseInt(this.lt.y))+"] RT["+a.Calc.leadingZero(parseInt(this.rt.x))+", "+a.Calc.leadingZero(parseInt(this.rt.y))+"] RB["+a.Calc.leadingZero(parseInt(this.rb.x))+", "+a.Calc.leadingZero(parseInt(this.rb.y))+"] LB["+a.Calc.leadingZero(parseInt(this.lb.x))+", "+a.Calc.leadingZero(parseInt(this.lb.y))+"] XY["+a.Calc.leadingZero(parseInt(this.x))+", "+a.Calc.leadingZero(parseInt(this.y))+"] WH["+a.Calc.leadingZero(parseInt(this.width))+", "+a.Calc.leadingZero(parseInt(this.height))+"] RO["+a.Calc.digit(a.Calc.toDegrees(this.rotation))+"]"},s(e,[{key:"points",get:function(){return{lt:this.lt,rt:this.rt,rb:this.rb,lb:this.lb}}},{key:"lt",get:function(){return this.toGlobal(this.ltp.position)}},{key:"rt",get:function(){return this.toGlobal(this.rtp.position)}},{key:"rb",get:function(){return this.toGlobal(this.rbp.position)}},{key:"lb",get:function(){return this.toGlobal(this.lbp.position)}},{key:"leftLine",get:function(){return{a:this.lb,b:this.lt}}},{key:"topLine",get:function(){return{a:this.lt,b:this.rt}}},{key:"rightLine",get:function(){return{a:this.rt,b:this.rb}}},{key:"bottomLine",get:function(){return{a:this.lb,b:this.rb}}},{key:"left",get:function(){return Math.min(this.lt.x,this.lb.x)}},{key:"right",get:function(){return Math.max(this.rt.x,this.rb.x)}},{key:"top",get:function(){return Math.min(this.lt.y,this.rt.y)}},{key:"bottom",get:function(){return Math.max(this.lb.y,this.rb.y)}},{key:"size",get:function(){return{width:this.rt.x-this.lt.x,height:this.lb.y-this.lt.y}}},{key:"bounds",get:function(){return{x:this.lt.x,y:this.lt.y,width:this.rt.x-this.lt.x,height:this.rb.y-this.rt.y}}}]),e}(PIXI.Container)},{"../const/HitSide":3,"../utils/Calculator":12,"../utils/Painter":13}],12:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();i.Calc=function(){function t(){n(this,t)}return t.getImageSizeKeepAspectRatio=function(e,i){var n=t.getBoundsScale(i,e).min;return{width:n*e.width,height:n*e.height}},t.getBoundsScale=function(t,e){var i=t.width/e.width,n=t.height/e.height;return i<n?{min:i,max:n}:{max:i,min:n}},t.getRotation=function(e,i){var n=i.x-e.x,o=i.y-e.y,r=Math.atan2(o,n);return t.toDegrees(r)},t.getDiagonal=function(t,e){return Math.sqrt(t*t+e*e)},t.getRectangleWidth=function(t,e,i){return t*i/e},t.toRadians=function(e){return e*t.DEG_TO_RAD},t.toDegrees=function(e){return e*t.RAD_TO_DEG},t.triangleArea=function(t,e,i){return i.x*e.y-e.x*i.y-(i.x*t.y-t.x*i.y)+(e.x*t.y-t.x*e.y)},t.isInsideSquare=function(e,i,n,o,r){return!(t.triangleArea(e,i,n)>0||t.triangleArea(e,n,o)>0||t.triangleArea(e,o,r)>0||t.triangleArea(e,r,i)>0)},t.sampleCodeHitTest=function(e,i,n,o,r){var s={isHitLeft:!1,isHitRight:!1,isHitTop:!1,isHitBottom:!1};return t.triangleArea(e,i,n)>0&&(s.isHitTop=!0),t.triangleArea(e,n,o)>0&&(s.isHitRight=!0),t.triangleArea(e,o,r)>0&&(s.isHitBottom=!0),t.triangleArea(e,r,i)>0&&(s.isHitLeft=!0),s},t.getPointsByBounds=function(t){return{lt:{x:t.x,y:t.y},rt:{x:t.x+t.width,y:t.y},rb:{x:t.x+t.height,y:t.y+t.height},lb:{x:t.x,y:t.y+t.height}}},t.digit=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;0===e&&(e=1);var i=Math.pow(10,e);return parseInt(t*i)/i},t.leadingZero=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,i="";if((t=t.toString()).length<e)for(var n=0;n<e-t.length;n++)i+="0";return i+t},t.getOneToOne=function(t,e,i,n,o){return(o-n)/(i-e)*(t-e)+n},t.getRotationPoint=function(t,e,i){var n=e.x-t.x,o=e.y-t.y,r=Math.sqrt(n*n+o*o),s=(180*Math.atan2(o,n)/Math.PI+i)%360*Math.PI/180;return{x:t.x+r*Math.cos(s)+.5|0,y:t.y+r*Math.sin(s)+.5|0}},t.getRotationRectanglePoints=function(e,i,n){return{lt:t.getRotationPoint(e,i.lt,n),rt:t.getRotationPoint(e,i.rt,n),rb:t.getRotationPoint(e,i.rb,n),lb:t.getRotationPoint(e,i.lb,n)}},t.getBoundsRectangle=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=e/2,n=Math.min(t.lt.x,t.rt.x,t.rb.x,t.lb.x),o=Math.min(t.lt.y,t.rt.y,t.rb.y,t.lb.y);return{x:n-i,y:o-i,width:Math.max(t.lt.x,t.rt.x,t.rb.x,t.lb.x)-n+e,height:Math.max(t.lt.y,t.rt.y,t.rb.y,t.lb.y)-o+e}},t.sqr=function(t){return t*t},t.dist2=function(e,i){return t.sqr(e.x-i.x)+t.sqr(e.y-i.y)},t.getShortestDistancePoint=function(e,i,n){var o=t.dist2(i,n);if(0==o)return i;var r=((e.x-i.x)*(n.x-i.x)+(e.y-i.y)*(n.y-i.y))/o;return r=Math.max(0,Math.min(1,r)),{x:i.x+r*(n.x-i.x),y:i.y+r*(n.y-i.y)}},t.distToSegmentSquared=function(e,i,n){var o=t.getShortestDistancePoint(e,i,n);return t.dist2(e,o)},t.distToSegment=function(e,i,n){return Math.sqrt(t.distToSegmentSquared(e,i,n))},t.getReturnPoint=function(t,e){return{x:t.x-e.x,y:t.y-e.y}},t.moveToCollision=function(e,i,n){var o=t.getShortestDistancePoint(i,n.a,n.b),r=t.getReturnPoint(i,o);e.x=e.x+r.x,e.y=e.y+r.y},t.getNextMovePosition=function(t,e,i,n){return{x:t+i*Math.cos(n),y:e+i*Math.sin(n)}},t.hasBox=function(e,i){for(var n=[i.lt,i.rt,i.rb,i.lb],o=0;o<n.length;o++)if(!1===t.isInsideSquare(n[o],e.lt,e.rt,e.rb,e.lb))return!1;return!0},t.trace=function(e){return t.leadingZero(parseInt(e))},t.copyObject=function(t){var e={};for(var i in t)e[i]=t[i];return e},o(t,null,[{key:"DEG_TO_RAD",get:function(){return t._DEG_TO_RAD?t._DEG_TO_RAD:(t._DEG_TO_RAD=Math.PI/180,t._DEG_TO_RAD)}},{key:"RAD_TO_DEG",get:function(){return t._RAD_TO_DEG?t._RAD_TO_DEG:(t._RAD_TO_DEG=180/Math.PI,t._RAD_TO_DEG)}},{key:"DEG180_TO_RAD",get:function(){return t._DEG180_TO_RAD?t._DEG180_TO_RAD:(t._DEG180_TO_RAD=180*Math.PI/180,t._DEG180_TO_RAD)}}]),t}()},{}],13:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var o=function(){function t(){n(this,t)}return t.getRect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16724736,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=t/2,o=new PIXI.Graphics;return o.beginFill(e,i),o.drawRect(-n,-n,t,t),o.endFill(),o},t.getCircle=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16724736,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=new PIXI.Graphics;return n.beginFill(e,i),n.drawRect(0,0,t),n.endFill(),n},t.drawBounds=function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:16724736,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.7;i&&t.clear(),t.lineStyle(n,o,r),t.drawRect(e.x,e.y,e.width,e.height),t.endFill()},t.drawPoints=function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:16724736,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.7;i&&t.clear();var s=e.lt,a=e.rt,h=e.rb,u=e.lb;t.lineStyle(n,o,r),t.moveTo(s.x,s.y),t.lineTo(a.x,a.y),t.lineTo(h.x,h.y),t.lineTo(u.x,u.y),t.lineTo(s.x,s.y),t.endFill()},t.drawCircle=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16724736,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.7;arguments.length>5&&void 0!==arguments[5]&&arguments[5]&&t.clear(),t.beginFill(n,o),t.drawCircle(e.x,e.y,i),t.endFill()},t.drawGrid=function(t,e,i){for(var n=.5;n<e;n+=10)(n-.5)%50==0?t.lineStyle(1,10066329,.3):t.lineStyle(1,14540253,.1),t.moveTo(n,0),t.lineTo(n,i);for(var o=.5;o<i;o+=10)(o-.5)%50==0?t.lineStyle(1,10066329,.3):t.lineStyle(1,14540253,.1),t.moveTo(0,o),t.lineTo(e,o);t.endFill()},t.drawDistToSegment=function(t,e,i,n,o){t.beginFill(52275,.2),t.lineStyle(1,39219,.1),t.moveTo(i.x,i.y),t.lineTo(n.x,n.y),t.drawCircle(i.x,i.y,3),t.drawCircle(n.x,n.y,3),t.beginFill(16764159,.2),t.lineStyle(1,13408716,.1),t.moveTo(e.x,e.y),t.lineTo(e.x,o.y),t.lineTo(o.x,o.y),t.drawCircle(e.x,e.y,3),t.drawCircle(o.x,o.y,3),t.endFill()},t.drawLine=function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:16724736,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;t.lineStyle(n,o,r),t.moveTo(e.x,e.y),t.lineTo(i.x,i.y)},t.drawHitSide=function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:16724736,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.7;t.beginFill(o,r),t.lineStyle(n,o,r),t.moveTo(e.x,e.y),t.lineTo(i.a.x,i.a.y),t.lineTo(i.b.x,i.b.y),t.endFill()},t}();i.default=o},{}],14:[function(t,e,i){"use strict";i.__esModule=!0;var n={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return 0===t?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return 1===t?1:1*(1-Math.pow(2,-10*t/1))},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},easeInCirc:function(t){return t>=1?t:-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:1==(t/=1)?1:(i||(i=.3),n<Math.abs(1)?(n=1,e=i/4):e=i/(2*Math.PI)*Math.asin(1/n),-n*Math.pow(2,10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/i))},easeOutElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:1==(t/=1)?1:(i||(i=.3),n<Math.abs(1)?(n=1,e=i/4):e=i/(2*Math.PI)*Math.asin(1/n),n*Math.pow(2,-10*t)*Math.sin((1*t-e)*(2*Math.PI)/i)+1)},easeInOutElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:2==(t/=.5)?1:(i||(i=.3*1.5*1),n<Math.abs(1)?(n=1,e=i/4):e=i/(2*Math.PI)*Math.asin(1/n),t<1?n*Math.pow(2,10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/i)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/i)*.5+1)},easeInBack:function(t){var e=1.70158;return 1*(t/=1)*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return 1*((t=t/1-1)*t*((e+1)*t+e)+1)},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:function(t){return 1-n.easeOutBounce(1-t)},easeOutBounce:function(t){return(t/=1)<1/2.75?7.5625*t*t*1:t<2/2.75?1*(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1*(7.5625*(t-=2.25/2.75)*t+.9375):1*(7.5625*(t-=2.625/2.75)*t+.984375)},easeInOutBounce:function(t){return t<.5?.5*n.easeInBounce(2*t):.5*n.easeOutBounce(2*t-1)+.5}},o=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}}(),r=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return window.clearTimeout(t,1e3/60)}}(),s=function(t,e,i,r,s,a){var h=0,u=n[i]||n.linear;o(function i(){var n=++h/e,c=u(n);if(t.call(a,c,n,h),r.call(a,c,n),h<e)try{a.animationFrame=o(i)}catch(t){console.log(t)}else s.apply(a)})};i.easingEffects=n,i.requestAnimFrame=o,i.cancelAnimFrame=r,i.animationLoop=s},{}]},{},[1]);